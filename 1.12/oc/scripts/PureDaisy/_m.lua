local a=require("component")local b=require("robot")local c=require('os')local d=a.geolyzer;local e=a.debug;local f=a.navigation;local g={"thaumcraft:stone_arcane","botania:livingrock","botania:livingwood"}local function h(i)local j=false;for k,l in ipairs(g)do if l==i then j=true;break end end;return j end;local m=1;local n=2;local o=32;local p=30;local q=f.getFacing()local r=tonumber(e.getX()-0.5)local s=tonumber(e.getY()-0.5)local t=tonumber(e.getZ()-0.5)local u=false;function gip()if q==2 then return r,s,t+1 end;if q==3 then return r,s,t-1 end;if q==4 then return r+1,s,t end;if q==5 then return r-1,s,t end end;function gop()if q==2 then return r+2,s,t+1 end;if q==3 then return r-2,s,t-1 end;if q==4 then return r+1,s,t-2 end;if q==5 then return r-1,s,t+2 end end;local v={gip()}local w={gop()}local function x(y,z,A)local B=tonumber(e.getX()-0.5)local C=tonumber(e.getY()-0.5)local D=tonumber(e.getZ()-0.5)local E=f.getFacing()if B==y and C==z and D==A then if q~=E then if q==2 then if E==3 then b.turnAround()end;if E==4 then b.turnRight()end;if E==5 then b.turnLeft()end end;if q==3 then if E==2 then b.turnAround()end;if E==4 then b.turnRight()end;if E==5 then b.turnLeft()end end;if q==4 then if E==2 then b.turnLeft()end;if E==3 then b.turnRight()end;if E==5 then b.turnAround()end end;if q==5 then if E==2 then b.turnRight()end;if E==3 then b.turnLeft()end;if E==4 then b.turnAround()end end end;return end;if B>y then if E==2 then b.turnLeft()end;if E==3 then b.turnRight()end;if E==5 then b.turnAround()end;b.forward()elseif B<y then if E==2 then b.turnRight()end;if E==3 then b.turnLeft()end;if E==4 then b.turnAround()end;b.forward()elseif C>z then b.down()elseif C<z then b.up()elseif D>A then if E==3 then b.turnAround()end;if E==4 then b.turnRight()end;if E==5 then b.turnLeft()end;b.forward()elseif D<A then if E==2 then b.turnAround()end;if E==4 then b.turnLeft()end;if E==5 then b.turnRight()end;b.forward()end;return x(y,z,A)end;local function F()return x(r,s,t)end;local function G()return x(v[1],v[2],v[3])end;local function H()return x(w[1],w[2],w[3])end;local function I()local J=d.analyze(0)if h(J["name"])then print("分析-成品")b.select(n)b.swingDown()b.select(m)b.placeDown()elseif J["name"]=="minecraft:air"then print("分析-空")b.select(m)b.placeDown()elseif not h(J["name"])then print("分析-非成品")c.sleep(p)I()end end;local function K()return b.count(m)==0 end;local function L()return b.count(n)>=o end;local function M()return b.count(n)==0 end;local function N()while true do if u==false then print('准备中')if L()then H()b.select(n)b.dropDown(o)print('准备-放材料完毕')elseif K()then G()b.select(m)b.suckDown(o)print('准备-取材料完毕')elseif b.count(m)~=0 then print('准备-移动到初始点位')F()u=true end else print('运行中')if L()or K()and M()then print('运行-到临界点，需要进入准备中')u=false else print('运行-前进一个边')I()b.forward()I()b.forward()b.turnRight()end end end end;N()